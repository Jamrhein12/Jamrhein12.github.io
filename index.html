<html>
<script src='https://cdn.jsdelivr.net/npm/d3@7'></script>
<style> rect {fill: lightblue; stroke: black; }</style>
<body onload='init()'>

<h1>NBA vs. NCAA Shooting Percentages Data</h1>

<p>Below are charts showing shooting percentage data of players in the NBA (National Basketball Association)
    and their respective shooting percentage data of when they played college basketball (NCAA)</p>

<script>

async function init() {

    const data = await d3.csv('https://Jamrhein12.github.io/players.csv');

    data.forEach(d => {
        d.nba_ppg = +d.nba_ppg;
    });

    // Filter data to...
    // 1. Player played college basketball
    // 2. Player started career in or after 2000
    // 3. Player has a career nba ppg >= 20
    const filteredData = data.filter(row => 
        row.active_from >= 2000 && 
        row.college !== null && 
        row.college !== "");

    console.log(filteredData);

    // Setting percentage data to numbers and getting averages
    /*
    const avg_nba_3ptapg = d3.mean(filteredData, d => +nba_3ptapg);
    const avg_nba_3ptpct = d3.mean(filteredData, d => +nba_3ptpct);
    const avg_nba_3ptpg = d3.mean(filteredData, d => +nba_3ptpg);
    const avg_nba_efgpct = d3.mean(filteredData, d => +nba_efgpct);
    const avg_nba_fg = d3.mean(filteredData, d => +nba_fg);
    const avg_nba_fg_per_game = d3.mean(filteredData, d => +nba_fg_per_game);
    const avg_nba_fga_per_game = d3.mean(filteredData, d => +nba_fga_per_game);
    const avg_nba_ft = d3.mean(filteredData, d => +nba_ft);
    const avg_nba_ft_per_g = d3.mean(filteredData, d => +nba_ft_per_g);
    const avg_nba_fta_p_g = d3.mean(filteredData, d => +nba_fta_p_g);
    const avg_nba_g_played = d3.mean(filteredData, d => +nba_g_played);
    const avg_nba_ppg = d3.mean(filteredData, d => +nba_ppg);
*/

    d3.select('body')
        .selectAll('p')
        .data(filteredData)
        .enter()
        .append('p')
        .html(function(d, i) { return 'Player Name: ' + d.name + ' College: ' + d.college + ' Career PPG: ' + d.nba_ppg; });

}

</script>
</body>
</html>
